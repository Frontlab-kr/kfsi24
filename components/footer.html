<footer class="kfsi-footer">
  <div class="kfsi-footer-site">
    <div class="kfsi-inner">
      <div class="kfsi-footer-site-select">
        <button>관련 사이트</button>
        <ul>
          <li>
            <a href="" target="_blank" title="관련사이트1이 새창으로 열립니다."
              >관련사이트 1</a
            >
          </li>
          <li>
            <a href="" target="_blank" title="관련사이트2이 새창으로 열립니다."
              >관련사이트 2</a
            >
          </li>
          <li>
            <a href="" target="_blank" title="관련사이트3이 새창으로 열립니다."
              >관련사이트 3</a
            >
          </li>
          <li>
            <a href="" target="_blank" title="관련사이트4이 새창으로 열립니다."
              >관련사이트 4</a
            >
          </li>
          <li>
            <a href="" target="_blank" title="관련사이트5이 새창으로 열립니다."
              >관련사이트 5</a
            >
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="kfsi-inner">
    <div class="kfsi-footer-head">
      <address>
        <img
          src="./assets/images/logo-footer.svg"
          alt="한국소방안전원"
          class="kfsi-footer-logo"
        />
        [07226] 서울특별시 영등포구 영중로 170 (영등포동8가)<br />
        사업자등록번호 : 107-82-05239<br />
        사이트 · 단순문의 : 1849-4819
        <p>
          <span>(콜센터 운영시간 :</span>
          <span
            >평일 08:00~18:00/<br class="mo" />
            점심시간 12:00~13:00/<br class="mo" />
            주말, 공휴일 제외)</span
          >
        </p>
        <br />
        <div class="kfsi-footer-link">
          <div class="kfsi-footer-accessibility">
            <img src="./assets/images/wa.png" alt="웹접근성 인증마크" />
          </div>
          <a href="">찾아오시는 길</a>
        </div>
        <a href="footer" data-bs-toggle="modal" data-bs-target="#footer-modal"
          >교재· 기술문의 안내 및 연락처</a
        >
      </address>
    </div>
    <div class="kfsi-footer-foot">
      <div>
        <div class="kfsi-footer-menu">
          <a href=""><strong>개인정보처리방침</strong></a>
          <a href="">영상정보처리기기 운영관리 방침</a>
          <a href="">이용약관</a>
          <a href="" class="underline">원격지원서비스</a>
        </div>
        <div class="kfsi-footer-copyright">
          COPYRIGHT ⓒ Korea Fire Safety Institute.<br class="mo" />
          All Rights Reserved.
        </div>
      </div>
      <div class="kfsi-footer-sns">
        <a
          href="https://pf.kakao.com/_reFxld"
          target="_blank"
          class="kfsi-footer-sns-kakao"
        >
          kakaotalk
        </a>
        <a
          href="http://www.youtube.com/channel/UCxxWnGhFgJOzsNOwYSHN5cQ"
          target="_blank"
          class="kfsi-footer-sns-youtube"
        >
          youtube
        </a>
        <a
          href="http://www.facebook.com/kfsi.official"
          target="_blank"
          class="kfsi-footer-sns-facebook"
        >
          facebook
        </a>
        <a
          href="http://www.instagram.com/kfsi_official"
          target="_blank"
          class="kfsi-footer-sns-instagram"
        >
          instagram
        </a>
        <a href="" class="kfsi-footer-sns-webzine"> webzine </a>
      </div>
    </div>
  </div>
  <script>
    $(function () {
      const $wrap = $('.kfsi-footer-site-select');
      const $btn = $wrap.find('button');
      const $menu = $wrap.find('ul');
      const $items = $menu.find('a');

      // ARIA 초기화
      $btn.attr({
        'aria-haspopup': 'menu',
        'aria-expanded': 'false',
        'aria-controls': 'kfsi-related-sites',
      });
      $menu.attr({ id: 'kfsi-related-sites', role: 'menu' });
      $items.attr({ role: 'menuitem', tabindex: '-1' });

      function openMenu(focusTarget = 'first') {
        $wrap.addClass('active');
        $btn.attr('aria-expanded', 'true');
        $items.attr('tabindex', '-1');
        const $t = focusTarget === 'last' ? $items.last() : $items.first();
        $t.attr('tabindex', '0').focus();
      }

      function closeMenu(returnFocus = false) {
        $wrap.removeClass('active');
        $btn.attr('aria-expanded', 'false');
        $items.attr('tabindex', '-1');
        if (returnFocus) $btn.focus();
      }

      // 버튼: 클릭/키보드로 열기/닫기
      $btn.on('click', function (e) {
        e.stopPropagation();
        $wrap.hasClass('active') ? closeMenu(true) : openMenu('first');
      });
      $btn.on('keydown', function (e) {
        switch (e.key) {
          case 'ArrowDown':
            e.preventDefault();
            openMenu('first');
            break;
          case 'ArrowUp':
            e.preventDefault();
            openMenu('last');
            break;
          case 'Enter':
          case ' ':
            e.preventDefault();
            $wrap.hasClass('active') ? closeMenu(true) : openMenu('first');
            break;
          case 'Escape':
            e.preventDefault();
            closeMenu(true);
            break;
        }
      });

      // 메뉴 항목: 방향키/홈/엔드/탭/ESC
      $items.on('keydown', function (e) {
        const i = $items.index(this);
        let next;
        switch (e.key) {
          case 'ArrowDown':
            e.preventDefault();
            next = (i + 1) % $items.length;
            break;
          case 'ArrowUp':
            e.preventDefault();
            next = (i - 1 + $items.length) % $items.length;
            break;
          case 'Home':
            e.preventDefault();
            next = 0;
            break;
          case 'End':
            e.preventDefault();
            next = $items.length - 1;
            break;
          case 'Escape':
            e.preventDefault();
            closeMenu(true);
            return;
          case 'Tab': // 포커스가 영역 밖으로 나가므로 닫고 기본 탭 이동 유지
            closeMenu(false);
            return;
          default:
            return;
        }
        $items.attr('tabindex', '-1');
        $items.eq(next).attr('tabindex', '0').focus();
      });

      // 항목 클릭 시 닫기
      $items.on('click', function () {
        closeMenu(false);
      });

      // 바깥 클릭 시 닫기
      $(document).on('click', function (e) {
        if (!$wrap.is(e.target) && $wrap.has(e.target).length === 0)
          closeMenu(false);
      });

      // 포커스가 컴포넌트 밖으로 완전히 나가면 닫기 (탭 이동 포함)
      $wrap.on('focusout', function () {
        setTimeout(function () {
          if (!$wrap.find(':focus').length) closeMenu(false);
        }, 0);
      });
    });
  </script>
</footer>

<!-- Modal -->
<div class="modal fade" id="footer-modal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered kfsi-footer-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title fs-5">교육·기술문의 안내 및 연락처</h3>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="mb-10">
          <h4 class="kfsi-h4">소방관선 업무</h4>
          <div class="kfsi-textlist m-0 mt-3">
            <ul>
              <li>소방안전관리자 선임신고</li>
              <li>위험물운송자 등록신고</li>
              <li>위험물안전관리자 선임신고</li>
              <li>소방시설관리업 기술자 등록신고</li>
            </ul>
          </div>
          <p class="m-0 mt-2 text-info">
            ※ 소방시설업 기술자 등록신고 → 한국소방시설협회로 문의 (1899-4224)
          </p>
        </div>
        <div class="mb-10">
          <h4 class="kfsi-h4">한국소방안전원 시도지부 민원안내</h4>
          <div class="kfsi-textlist m-0 mt-3">
            <ul>
              <li>
                <strong>[교육관련]</strong> 계산서 발행 / 환불 신청 / 대상처
                선임자 정보변경 / 교육안내문 발송
              </li>
              <li>
                <strong>[회원관련]</strong> 회원 가입·탈퇴 / 회비고지서 발송 /
                영수증 발행 / 환불신청
              </li>
              <li>
                <strong>[기술관련]</strong> 소방점검 견적신청 / 소방법령
                기술자문 / 소방계획서 소방교육훈련
              </li>
            </ul>
          </div>
        </div>
        <div class="d-flex mo-flex-column column-gap-5 row-gap-10">
          <div>
            <h5 class="kfsi-h5">지부 전화번호 현황</h5>
            <div class="kfsi-table mt-3">
              <table>
                <caption>
                  지부 전화번호 현황
                </caption>
                <colgroup>
                  <col width="120px" />
                  <col width="162px" />
                  <col width="120px" />
                  <col width="162px" />
                </colgroup>
                <tbody>
                  <tr>
                    <th class="text-start" scope="row">서울지부</th>
                    <td class="text-start">02-850-1378</td>
                    <th class="text-start" scope="row">서울동부지부</th>
                    <td class="text-start">02-850-1392</td>
                  </tr>
                  <tr>
                    <th class="text-start" scope="row">부산지부</th>
                    <td class="text-start">051-553-8423</td>
                    <th class="text-start" scope="row">인천지부</th>
                    <td class="text-start">032-569-1971</td>
                  </tr>
                  <tr>
                    <th class="text-start" scope="row">대구경북지부</th>
                    <td class="text-start">053-431-2393</td>
                    <th class="text-start" scope="row">경기지부</th>
                    <td class="text-start">031-257-0131</td>
                  </tr>
                  <tr>
                    <th class="text-start" scope="row">울산지부</th>
                    <td class="text-start">052-256-9011</td>
                    <th class="text-start" scope="row">경기북부지부</th>
                    <td class="text-start">031-945-3118</td>
                  </tr>
                  <tr>
                    <th scope="row">경남지부</th>
                    <td>055-237-2071</td>
                    <th scope="row">대전충남지부</th>
                    <td>042-638-4119</td>
                  </tr>
                  <tr>
                    <th class="text-start" scope="row">광주전남지부</th>
                    <td class="text-start">062-942-6679</td>
                    <th class="text-start" scope="row">충북지부</th>
                    <td class="text-start">043-237-3119</td>
                  </tr>
                  <tr>
                    <th class="text-start" scope="row">전북지부</th>
                    <td class="text-start">063-212-8315</td>
                    <th class="text-start" scope="row">강원지부</th>
                    <td class="text-start">033-345-2119</td>
                  </tr>
                  <tr>
                    <th class="text-start" scope="row">제주지부</th>
                    <td class="text-start">064-758-8047</td>
                    <th class="text-start" scope="row"></th>
                    <td class="text-start"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div>
            <h5 class="kfsi-h5">본부 전화번호 현황</h5>
            <div class="kfsi-table mt-3">
              <table>
                <caption>
                  각 부서의 명칭, 전화번호, 및 주요 업무를 정리한 표입니다.
                </caption>
                <colgroup>
                  <col width="140px" />
                  <col width="140px" />
                  <col width="140px" />
                  <col width="140px" />
                </colgroup>

                <thead>
                  <tr>
                    <th scope="col" colspan="2"><span>부서명</span></th>
                    <th scope="col"><span>전화</span></th>
                    <th scope="col"><span>업무 키워드</span></th>
                  </tr>
                </thead>

                <tbody>
                  <tr>
                    <td rowspan="2"><span>경영관리부</span></td>
                    <td><span>경영지원과</span></td>
                    <td><span>02-850-1365</span></td>
                    <td><span>채용/인사/시설물 관리/유지보수</span></td>
                  </tr>
                  <tr>
                    <td class="border-left"><span>재무회계과</span></td>
                    <td><span>02-850-1366</span></td>
                    <td><span>예산집행/결산</span></td>
                  </tr>

                  <tr>
                    <td rowspan="2"><span>고객관리부</span></td>
                    <td class="border-left"><span>고객지원과</span></td>
                    <td><span>02-850-1377</span></td>
                    <td><span>회원/회비/전산</span></td>
                  </tr>
                  <tr>
                    <td class="border-left"><span>홍보과</span></td>
                    <td><span>02-850-1376</span></td>
                    <td><span>대국민 홍보</span></td>
                  </tr>

                  <tr>
                    <td rowspan="2"><span>정책연구소</span></td>
                    <td class="border-left"><span>전문자격과</span></td>
                    <td><span>02-850-1371</span></td>
                    <td><span>시험자격/수첩</span></td>
                  </tr>
                  <tr>
                    <td class="border-left"><span>정책연구과</span></td>
                    <td><span>02-850-1369</span></td>
                    <td><span>법령/정책연구</span></td>
                  </tr>
                  <tr>
                    <td rowspan="2"><span>교육부</span></td>
                    <td><span>교육운영과</span></td>
                    <td><span>02-850-1370</span></td>
                    <td><span>교육계획/교육운영기준 수립</span></td>
                  </tr>
                  <tr>
                    <td class="border-left"><span>교재개발과</span></td>
                    <td><span>02-850-1372</span></td>
                    <td><span>교재/의용소방대/다중이용업 교육</span></td>
                  </tr>
                  <tr>
                    <td rowspan="2"><span>안전관리부</span></td>
                    <td><span>기술지원과</span></td>
                    <td><span>02-850-1374</span></td>
                    <td rowspan="2">
                      <span>소방시설점검/연구실안전진단/화재안전진단</span>
                    </td>
                  </tr>
                  <tr>
                    <td class="border-left"><span>안전진단과</span></td>
                    <td><span>02-850-1375</span></td>
                  </tr>
                  <tr>
                    <td colspan="2"><span>감사실</span></td>
                    <td><span>02-850-1364</span></td>
                    <td><span>감사/클린신고센터</span></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-outline-secondary btn-lg"
          data-bs-dismiss="modal"
        >
          닫기
        </button>
      </div>
    </div>
  </div>
</div>
